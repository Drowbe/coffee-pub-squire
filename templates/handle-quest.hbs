{{!-- QUEST TOOLS --}} 
<div class="handle-info-container">
    <span class="handle-info-title">Quests</span>
    <span class="tray-handle-separator dot"></span>
    {{#if pinnedQuest}}
        <span class="handle-pinned-quest-name">{{pinnedQuest.name}}</span>
    {{else}}
        <span class="handle-pinned-quest-name">No Pinned Quest</span>
    {{/if}}
</div>

{{!-- QUEST PROGRESS --}} 
{{#if pinnedQuest}}
    <div class="handle-quest-progress-container">
        {{#each pinnedQuest.tasks as |task index|}}
            <div class="handle-quest-progress-square{{#if task.hasPinOnCanvas}} objective-pins-oncanvas{{/if}}{{#if task.hasPinNearby}} objective-pins-nearby{{/if}}">
                <div class="handle-quest-progress-fill objective-{{task.state}}" 
                    data-task-index="{{@index}}">
                    {{#if (eq task.state "completed")}}
                        <i class="fas fa-check"></i>
                    {{/if}}
                    {{#if (eq task.state "failed")}}
                        <i class="fas fa-xmark"></i>
                    {{/if}}
                    {{#if (eq task.state "hidden")}}
                        <i class="fas fa-eye"></i>
                    {{/if}}
                    {{#if (eq task.state "active")}}
                        <span class="handle-quest-progress-index">{{add @index 1}}</span>
                    {{/if}}
                </div>
            </div>
        {{/each}}
    </div>
{{/if}}
{{!-- NOTE: To display objectives in top-to-bottom order, reverse pinnedQuest.tasks in JS before passing to the template. --}}

{{!-- CHARACTER PORTRAIT --}} 
{{> handle-character-portrait}}

{{!-- THESE DO NOT REQUIRE A SELECTED TOKEN --}} 

{{!-- MACROS --}} 
{{> handle-macros}}

{{!-- HEALTH --}} 
{{> handle-health-tray}}

{{!-- DICE TRAY --}} 
{{> handle-dice-tray}}


{{!-- FINALSEPARATOR --}} 
<span class="tray-handle-separator line"></span>