<form class="codex-form" method="post">
    <!-- Hidden fields for data -->
    <input type="hidden" name="img" value="{{entry.img}}">
    
    <!-- Drag & Drop Zone -->
    <div class="codex-drag-zone">
        <div class="drag-zone-content">
            <i class="fas fa-cloud-upload-alt"></i>
            <h3>Drag & Drop Here</h3>
            <p>Drop tokens, items, or journal entries to auto-populate fields</p>
            <div class="drag-zone-examples">
                <span class="drag-example">üë§ Characters</span>
                <span class="drag-example">‚öîÔ∏è Items</span>
                <span class="drag-example">üìñ Journals</span>
            </div>
        </div>
    </div>

    <!-- Image Preview -->
    <div class="codex-image-section" style="display: none;">
        <label>Image</label>
        <div class="codex-image-preview-wrapper">
            <img class="codex-image-preview" src="" alt="Preview">
            <button type="button" class="codex-remove-image">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <!-- Basic Information -->
    <div class="form-section">
        <h3>Basic Information</h3>
        
        <div class="form-group">
            <label for="name">Name *</label>
            <input type="text" id="name" name="name" value="{{entry.name}}" required>
        </div>

        <div class="form-group">
            <label for="category">Category *</label>
            <select id="category" name="category" class="form-group-select" required>
                <option value="">Select Category</option>
                {{#each existingCategories}}
                <option value="{{this}}" {{#if (eq this ../entry.category)}}selected{{/if}}>{{this}}</option>
                {{/each}}
                <option value="new">+ New Category</option>
            </select>
            <input type="text" id="new-category" name="new-category" placeholder="Enter new category" class="new-category">
        </div>

        <div class="form-group">
            <label for="location">Location</label>
            <select id="location" name="location"class="form-group-select" >
                <option value="">Select Location</option>
                {{#each existingLocations}}
                <option value="{{this}}" {{#if (eq this ../entry.location)}}selected{{/if}}>{{this}}</option>
                {{/each}}
                <option value="new">+ New Location</option>
            </select>
            <input type="text" id="new-location" name="new-location" placeholder="Enter new location" class="new-category">
        </div>
    </div>

    <!-- Content -->
    <div class="form-section">
        <h3>Content</h3>
        
        <div class="form-group">
            <label for="description">Description</label>
            <textarea id="description" name="description" rows="4" placeholder="Describe what this is, where it's located, and any important details...">{{#if entry.description}}{{entry.description}}{{/if}}</textarea>
        </div>

        <div class="form-group">
            <label for="plotHook">Plot Hook</label>
            <textarea id="plotHook" name="plotHook" rows="3" placeholder="How does this relate to the story? What might the party need from it?">{{#if entry.plotHook}}{{entry.plotHook}}{{/if}}</textarea>
        </div>
    </div>

    <!-- Tags -->
    <div class="form-section">
        <h3>Tags</h3>
        <div class="form-group">
            <label for="tags">Tags (comma-separated)</label>
            <input type="text" id="tags" name="tags" value="{{#if entry.tags}}{{#if (isArray entry.tags)}}{{entry.tags.join ', '}}{{else}}{{entry.tags}}{{/if}}{{/if}}" placeholder="Enter tags separated by commas">
            <div class="tag-suggestions">
                <small>Common tags: Characters, Items, Locations, Factions, Artifacts, Events</small>
            </div>
        </div>
    </div>

    <!-- Action Buttons -->
    <div class="form-actions">
        <button type="submit" class="btn-primary">
            <i class="fas fa-save"></i> Save Entry
        </button>
        <button type="button" class="btn-secondary cancel">
            <i class="fas fa-times"></i> Cancel
        </button>
    </div>
</form> 